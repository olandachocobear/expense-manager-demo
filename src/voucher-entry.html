<link rel="import" href="../bower_components/polymer/polymer-element.html">

<link rel="import" href="./standard-input.html">
<link rel="import" href="./voucher-label.html">
<link rel="import" href="../bower_components/iron-icon/iron-icon.html">
<link rel="import" href="../bower_components/vaadin-button/vaadin-button.html">

<link rel="import" href="../bower_components/iron-swipeable-container/iron-swipeable-container.html">

<script src="./js/voucher-entry.js"></script>

<dom-module id="voucher-entry">
  <template>
    
    <style>
      div {
        margin-bottom:10px;
      }
      voucher-label{
        /* float:left; strange..if commented, it will be floating */
        position: relative;
        /* left:42%; */
        box-shadow: 1px 2px 4px darkslateblue;
        top: -18px;
        left: 37%;
        z-index: 2;
        line-height: 1;
        vertical-align: baseline;
        margin: 0 .14285714em;
        background-color: lightsteelblue;
        background-image: none;
        padding: .4983em 1.403em; /* .5833em .833em; */
        color: #556b2fee;
        /* color: rgba(0,0,0,.6); */
        text-transform: none;
        font-weight: 500;
        border: 0 solid transparent;
        opacity: 0.95;
      }
      voucher-label:before {
        position: absolute;
        -webkit-transform: translateY(-50%) translateX(50%) rotate(-45deg);
        transform: translateY(-50%) translateX(50%) rotate(-45deg);
        top: 50%;
        right: 100%;
        content: '';
        background-color: lightsteelblue;
        background-image: none;
        width: 1.56em;
        height: 1.56em;
        -webkit-transition: none;
        transition: none;
      }
      voucher-label:after{
        position: absolute;
        content: '';
        top: 50%;
        left: -.25em;
        margin-top: -.25em;
        background-color: #fff!important;
        width: .5em;
        height: .5em;
        -webkit-box-shadow: 0 -1px 1px 0 rgba(0,0,0,.3);
        box-shadow: 0 -1px 1px 0 rgba(0,0,0,.3);
        border-radius: 500rem;
      }

      overlay {
        display:block;
        background: #ef7777;
        z-index:1;
      -webkit-filter: blur(25px);
      -moz-filter: blur(25px);
      -o-filter: blur(25px);
      -ms-filter: blur(25px);
      filter: blur(6px);
      opacity: 1;
      height: 11px;
    width: 95%;
    margin-left: 2%;
    margin-top: -36px;
    visibility: hidden;
    
      }

      overlay[shown]{
        visibility: visible;
    }

      voucher-label { visibility: hidden;}
      voucher-label[shown] {visibility: visible;}

      .preload{
        display:none;
        float: right;
        margin-top: -24px;
        transition: visibility 2s linear,opacity 2s linear;
        margin-right: 14%;
        opacity:0.94
      };

      .preload[shown]{display: inline-block;}
      
      #reloader {
        opacity:0;
        transition: opacity 0.15s linear;
        /* transition-delay: 0.8s; */
      }
      #reloader[shown]{
        opacity:1;
      }
      div [shake]{  
        animation: wrong-log 0.3s;
      }

      @-moz-keyframes wrong-log {
        0%, 100% {
          left: 0px;
        }
        20% , 60% {
          left: 15px;
        }
        40% , 80% {
          left: -15px;
        }
      }
      @-webkit-keyframes wrong-log {
        0%, 100% {
          left: 0px;
        }
        20% , 60% {
          left: 15px;
        }
        40% , 80% {
          left: -15px;
        }
      }
      @keyframes wrong-log {
        0%, 100% {
          left: 0px;
        }
        20% , 60% {
          left: 15px;
        }
        40% , 80% {
          left: -15px;
        }
      }

      #reloader {
        top:8px;
        right:2%;
        z-index:800;
        border:2px solid #666;
        padding:4px 4px;
        background:#7be668eb;
        border-radius:18px;
        width:18px;height:17px;
        position:relative;float:right;
        display: inline-block;
      }
    </style>

    <!-- <dom-repeat items={{vouchers}}> -->
      <!-- <template> -->
        
        <div>
          <vaadin-button on-click="_removeNode" data-id=[[voucher.id]] 
            style="z-index:100;display:inline-block;float:right;background:#b0c4de85;margin-top:3px">
            <img src="images/trash-icon.png"  style="width:25px">
          </vaadin-button>
          <!-- <iron-icon icon="lumo:new" slot="suffix"></iron-icon>
          <iron-icon icon="expense-manager:delete" slot="suffix"></iron-icon> -->

          <div id=reloader on-click='_reload' shown$=[[voucher.unchecked]]
            >
            <img src="images/rotate-left.png">
          </div>

          <!-- <h5>[[voucher.uniqueCode]]</h5> -->
          <div style=position:relative shake$=[[shaking]]>
              <standard-input read-only=[[voucher.voucherEligible]]
                current-voucher=[[voucher]] 
                code={{voucher.uniqueCode}}
                style="margin-left:13%"
                show-reload=[[voucher.unchecked]]>
              </standard-input>
          </div>

          <overlay shown$="[[voucher.voucherEligible]]">.</overlay>
          
          <voucher-label 
            bgColor="red"
            label=[[voucher.voucherType]]
            id=[[voucher.id]]
            shown$="[[voucher.voucherEligible]]"
          >
          </voucher-label>

          <div class="preload" shown$="[[voucher.onCheck]]">
            <img src="images/preload2.gif" >
         </div>
          <!-- extra information on the right..-->
          
        </div>
      <!-- </template> -->
    <!-- </dom-repeat> -->
    
  </template>

  
</dom-module>

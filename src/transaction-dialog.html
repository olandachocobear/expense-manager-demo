<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/vaadin-button/vaadin-button.html">
<link rel="import" href="../bower_components/vaadin-dialog/vaadin-dialog.html">

<link rel="import" href="../bower_components/number-input/number-input.html">
<link rel="import" href="../bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="../bower_components/paper-icon-button/paper-icon-button-light.html">
<link rel="import" href="../bower_components/iron-icon/iron-icon.html">

<link rel="import" href="./vouchers-area.html">

<script type='module' src="./js/transaction-dialog.js"></script>

<dom-module id="transaction-dialog">
  <template>
      <iron-ajax id="ajax"
        url="https://reqres.in/api/login" method="post" 
        handle-as="json"
        on-response="onResponse"
        on-error="onError"
        last-response="{{response}}">
      </iron-ajax>

      <iron-ajax id="processRedeem" 
          url="https://reqres.in/api/users" method="post" 
          body='{
            "name": "morpheus",
            "job": "leader"
          }'
          on-response="eligibleResponse">
      </iron-ajax>

    
    <vaadin-dialog modeless noCloseOnEsc noCloseOnOutsideClick id="dialog" no-close-on-esc no-close-on-outside-click opened="[[open]]">
      <template>
          <style>
             #add-button {
                position: relative;
                height: var(--lumo-size-xl);
                width: var(--lumo-size-xl);
                right: 16px;
                bottom: 28px;
                float: right;
                z-index: 1;
                background: var(--loyalty-primary-color);
                color: var(--lumo-error-contrast-color);
                box-shadow: var(--lumo-box-shadow-m);
                border-radius: 50%;
              }
              .wrapper {
                display: flex;
                margin-top: var(--lumo-space-s);
              }
    
              #form {
                min-width: 300px;
                display: flex;
                flex-direction: column;
              }
    
              #upload {
                margin-left: var(--lumo-space-l);
              }
    
              .buttons vaadin-button {
                margin-right: var(--lumo-space-m);
              }
    
              vaadin-text-area {
                min-height: 125px;
              }
    
              img {
                max-width: 350px;
              }
    
              @media (max-width: 900px) {
                [part~="overlay"] {
                  align-self: stretch;
                  border-radius: 0;
                }
    
                #upload {
                  margin: 10px 0;
                }
    
                .wrapper {
                  flex-direction: column;
                }
    
                .receipt-wrapper img {
                  max-width: 100%;
                }
              }
              h4 {
                font-size: 10px;
                margin-bottom: -18px;
              }
              h2 {
                margin-bottom:13px;
              }
          </style>

        <div style="float:right;line-height: 22px;
        font-size: 13px;
        opacity: 0.8;
        margin-top:3px;margin-right:1px;text-align:right">
          <p>
            <u><b><span style=color:blue>Cashier</span></b></u>:</i><br>
            Wijaya
          </p>
        </div>

        <h4>VOUCHER REDEMPTION</h4>
        <h2>PT Sumber Alfaria Trijaya</h2>
        <h3 style="margin-top: -14px; color: rgb(0,0,0,0.6);">Alfamart Pasaraya</h3>

        <div id="form">
            <!-- <iron-a11y-keys keys="enter" on-keys-pressed="_save"></iron-a11y-keys> -->
            
            <!-- <vaadin-combo-box name="merchant" items='[{"label": "Voucher", "value": 0}, {"label": "Coupon", "value": 1}]' value="{{_expense.transType}}" selected="Voucher" label="Type Promotion" required></vaadin-combo-box> -->

            <vaadin-text-field name="total" value="{{_expense.total}}" label="Total transaction" pattern="[0-9]+[.]?[0-9]*" required>
              <div slot="prefix">Rp</div>
            </vaadin-text-field>
            
            <!-- <vaadin-text-field label="Merchant Name" value="Matahari Department Store (Ciputra Mall)" readonly></vaadin-text-field> -->

            <!-- <vaadin-date-picker name="date" label="Date" value="{{_expense.date}}" required></vaadin-date-picker> -->
            
            <!-- <vaadin-text-field name="voucher_code" value="{{_expense.total}}" label="Voucher" pattern="[0-9]+[.]?[0-9]*" required>
                <div slot="prefix">$</div>
              </vaadin-text-field> -->

            <div class="vaadin-text-field-container" style="margin-top:18px;
                  font-weight:500; 
                  font-size: var(--lumo-font-size-s); 
                  color: var(--lumo-secondary-text-color);
            ">
                <label part="label" id="vaadin-text-field-label-11">Voucher code</label>
            </div>

            <div style="margin-top:11px;
                        width: 100%;
                        text-align: center;">

            <vouchers-area> </vouchers-area>
            </div>  
            
            
            <!-- <vaadin-text-area name="comment" label="Comment" value="{{_expense.comment}}"></vaadin-text-area> -->
            
            <div style="display:none;margin-top:31px;
            margin-bottom:28px; text-align:center">
              
              <vaadin-text-field value="Go-Cafe 25k!!" readonly style="
                font-size:15px;
                opacity:90%;
                width:121px;
                height:53px;
                background-color:darkseagreen"
              ></vaadin-text-field>

            </div>
          </div>
<!-- 
        <center style=margin-top:17px;margin-bottom:18px> ----- </center> -->

        <paper-icon-button-light id="add-button">
            <button aria-label="Add expense" on-click="_add">
              <iron-icon icon="expense-manager:add"></iron-icon>
            </button>
          </paper-icon-button-light>

        <div class="buttons" style=text-align:center;margin-bottom:-10px>
          <vaadin-button theme="primary" on-click="_burn" style="opacity:0.84;height:50px;width:100%">Redeem!</vaadin-button>
        </div>

      </template>
    </vaadin-dialog>

  </template>
  
</dom-module>
